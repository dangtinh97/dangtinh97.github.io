<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        iframe:after{
            display: none!important;
        }
    </style>
</head>
<body>
<div>
    <label>
        <input type="radio" value="https://45c8-116-96-45-144.ngrok-free.app" name="base-url">
        https://45c8-116-96-45-144.ngrok-free.app
    </label>
    <p></p>
   <label>
       <input type="radio" value="https://api-locago.dev.locamos.com" name="base-url" checked>
       https://api-locago.dev.locamos.com
   </label>
    <p>
        Option
        <label for="curl-option"></label><input type="text" id="curl-option">
    </p>
    <p>
        <textarea rows="9" cols="100" id="result"></textarea>
    </p>
    <div>
        <button id="curl">CURL</button>
    </div>

</div>
<script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="lcg_enterprise_dev_bot" data-size="small" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<script type="text/javascript">
  const URL_VERIFY = 'https://api-locago.dev.locamos.com/mini-app/telegram-verify';
  // const URL_VERIFY = 'https://b7f6-116-96-45-144.ngrok-free.app/mini-app/telegram-verify';
  function onTelegramAuth(user) {

  }

  verifyData  = (user)=>{
    fetch(URL_VERIFY, {
      headers:{
        'Content-Type':'application/json'
      },
      method:"POST",
      data:JSON.stringify({})
    }).then((res)=>{
      console.log(res)
    })
  }
  // verifyData({})

  document.addEventListener("DOMContentLoaded",()=>{
    const corsFix = ()=>{
      const baseUrl = $('input[name="base-url"]:checked').val()+'/login'
      var settings = {
        "url": $('#curl-option').val().trim()!=='' ? $('#curl-option').val(): baseUrl,
        "method": "POST",
        "timeout": 0,
        "headers": {
          "lang": "vi",
          "os-name": "IOS",
          "os-version": "1.2",
          "app-version": "1.2",
          "uuid": "11111",
          "gmt": "420",
          "Content-Type": "application/json"
        },
        "data": JSON.stringify({
          "access_token": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjBlMzQ1ZmQ3ZTRhOTcyNzFkZmZhOTkxZjVhODkzY2QxNmI4ZTA4MjciLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhenAiOiI0NTI2ODI1NTcxMzctaWFqa2JtbGVpZHQyaDJpZ25kaDhlMXRhNW90b2M1Z2ouYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJhdWQiOiI0NTI2ODI1NTcxMzctaWFqa2JtbGVpZHQyaDJpZ25kaDhlMXRhNW90b2M1Z2ouYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJzdWIiOiIxMDg4MTE2MjE5ODM5OTAwMzU3NzAiLCJlbWFpbCI6ImRhbmd0aW5oYTJAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsIm5iZiI6MTcyMTM2NDY0NSwibmFtZSI6IsSQxINuZyBUw61uaCBPZmZpY2lhbCIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS9BQ2c4b2NJTXZQSC1VZERDanlxZm1ab3dpMEtBSG5Ec0g3cW5Pd3RnSjVNbVl2UFJ2eHk5T3g1ZD1zOTYtYyIsImdpdmVuX25hbWUiOiLEkMSDbmcgVMOtbmgiLCJmYW1pbHlfbmFtZSI6Ik9mZmljaWFsIiwiaWF0IjoxNzIxMzY0OTQ1LCJleHAiOjE3MjEzNjg1NDUsImp0aSI6IjY1YTM0ZDMxZmIyODc1M2QxNzU4MGI4MDE2YWZlZjUxMDUzZTQ5NjkifQ.qgbMkwpnkBlvAozZ4VUJktiG_ULxlWXpcSKnz6baRnYUDZr0gsSCqoJ6lkcLX-JjuKA_GHV-i8LEk7O3_c-dbOPgZjk2qUKXOPq5Mc1ZaZtiXyjPltzNwFe8k68D3K5i7phJZS1x6hGxWnxNirlStf2-pSKGATeiuv72UKgy5jKbo4oarwu14f29QC7AFLDgy0WxjhdUnfV5MLQyISW7OPUu2CeF8ZAmMGIyqAh8ldPordmbSUwIby302WogVR2-CtgEOHJYcqXn36TYDg7ThH7AOsiuHHeUFm-l0bKE9Ng-RtYKkRl8XJCded90Rl8qAtWnhesINtUhgQd9ur_5vg",
          "type_account": "GOOOGLE_ID"
        }),
      };
      $.ajax(settings).done(function (response) {
        $('#result').html(response);
      }).fail((e)=>{
        $('#result').html(JSON.stringify(e))
      });
    }
    $('#curl').on('click',()=>{
      corsFix();
    })
  })

</script>
</body>
</html>
